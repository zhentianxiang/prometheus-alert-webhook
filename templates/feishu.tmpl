{{define "feishu_message"}}[
    {{- range $i, $alert := .alerts -}}
    {{if $i}},{{end}}
    {
        "msg_type": "interactive",
        "card": {
            "config": {
                "wide_screen_mode": true,
                "enable_forward": true
            },
            "header": {
                "template": "{{if eq $alert.Status `resolved`}}green{{else}}red{{end}}",
                "title": {
                    "tag": "plain_text",
                    "content": "PrometheusAlert"
                }
            },
            "elements": [
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "{{if eq $alert.Status `resolved`}}âœ… Kubernetes é›†ç¾¤æ¢å¤é€šçŸ¥ âœ…{{else}}ğŸš¨ Kubernetes é›†ç¾¤å‘Šè­¦é€šçŸ¥ ğŸš¨{{end}}" }
                },
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "ğŸ”” **å‘Šè­¦åç§°:** {{$alert.Labels.alertname}}\nğŸš© **å‘Šè­¦çº§åˆ«:** {{$alert.Labels.severity}}" }
                },
                { "tag": "hr" },
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "ğŸ”¥ **å‘Šè­¦çŠ¶æ€:** {{$alert.Status}}\nğŸ•’ **å¼€å§‹æ—¶é—´:** {{getCSTtime $alert.StartsAt}}{{if eq $alert.Status `resolved`}}\nğŸ•’ **ç»“æŸæ—¶é—´:** {{getCSTtime $alert.EndsAt}}{{end}}" }
                },
                { "tag": "hr" },
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "**ğŸ“Œ å‘Šè­¦è¯¦æƒ…**\n{{- range $alert.Fields}}\n- {{.key}} {{.value}}{{- end}}" }
                },
                { "tag": "hr" },
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "**ğŸ“ å‘Šè­¦æè¿°**\n{{- if $alert.Annotations.summary}}**æ‘˜è¦:** {{$alert.Annotations.summary}}\n{{end}}{{- if $alert.Annotations.message}}**è¯¦æƒ…:** {{$alert.Annotations.message}}{{- end}}{{if not (or $alert.Annotations.summary $alert.Annotations.message)}}æš‚æ— æè¿°{{end}}" }
                },
                { "tag": "hr" },
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "**ğŸ“… å‘Šè­¦æ—¶é—´çº¿**\n- **é¦–æ¬¡è§¦å‘:** {{getCSTtime $alert.StartsAt}}" }
                },
                { "tag": "hr" },
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "**ğŸ“ è”ç³»æ”¯æŒ**\nå¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³» Kubernetes è¿ç»´å›¢é˜Ÿæˆ–æŸ¥çœ‹ç›¸å…³æ–‡æ¡£ã€‚" }
                },
                { "tag": "hr" },
                {
                    "tag": "div",
                    "text": { "tag": "lark_md", "content": "{{if eq $alert.Status `resolved`}}**âœ… å‘Šè­¦å·²æ¢å¤ï¼Œè¯·ç¡®è®¤ä¸šåŠ¡æ­£å¸¸è¿è¡Œï¼**{{else}}**ğŸ”” è¯·åŠæ—¶å¤„ç†ï¼Œé¿å…å½±å“ä¸šåŠ¡æ­£å¸¸è¿è¡Œï¼**{{end}}" }
                },
                {
                    "tag": "note",
                    "elements": [
                        {
                            "tag": "plain_text",
                            "content": "PrometheusAlert"
                        }
                    ]
                }
            ]
        }
    }
    {{- end -}}
]
{{end}}